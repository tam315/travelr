# サービス名

Travelr

# 目的

時代の大きく異なる 2 つの写真を比較することで、歴史について思いをはせる。

# 機能概要

* ユーザは、写真を投稿でき、自分の投稿を管理できる
* ユーザは、投稿を地図上やリスト形式で閲覧できる
* ユーザは、投稿をスライダで比較しながら閲覧できる
* ユーザは、投稿に対していいねをしたり、コメントを記入できる
* ユーザは、自分のアカウント情報を編集できる
* 管理者は、全員の投稿を管理できる。

# 画面の種類とその要件

* ランディング

  * ユーザは、このサービスの概要を知ることができる

* ログイン

  * ユーザは、サインアップ/サインイン（Google|Facebook）ができる

* 閲覧（全部）

  * ユーザは、地図表示もしくはリスト表示により、投稿を一覧で見れる
  * ユーザは、投稿を[検索条件]によりフィルタできる
  * ユーザは、個別の投稿を「閲覧（一部）」の画面で開くことができる

* 閲覧（一部）

  * ユーザは、2 枚の写真をスライダで比較しながら閲覧できる
  * ユーザは、投稿のメタ情報・統計情報を閲覧できる
  * ユーザは、コメントと「いいね」を作成できる
  * ユーザは、コメントを閲覧できる

* 投稿

  * ユーザは、2 枚の写真を投稿できる。（カメラで撮影 or ファイルを添付）
  * ユーザは、写真をドロップしてアップロードできる。
  * ユーザは、メタ情報を付与できる。このうち、位置情報については、写真から取得するか、現在位置から取得できる。

* 投稿管理（全部）

  * ユーザは、自分の投稿を一覧で見れる
  * ユーザは、自分の複数の投稿を一括して削除できる
  * ユーザは、自分の投稿を[検索条件]によりフィルタできる
  * ユーザは、個別の投稿を「投稿管理（一部）」の画面で開くことができる

* 投稿管理（一部）

  * ユーザは、閲覧（一部）の画面と同じ画面で、自分の投稿を確認できる
  * ユーザは、投稿を編集できる
  * ユーザは、投稿を削除できる

* アカウント管理

  * ユーザは、アカウント名を編集できる
  * ユーザは、アカウントでの投稿の統計情報のトータルを見れる
  * ユーザは、現在のアカウントを、他のアカウントプロバイダと紐付けできる。

* 管理者

  * 管理者は、全てのユーザの投稿を管理できる。
  * 画面は、投稿管理（一覧）と、投稿管理（個別）を流用する。

# その他要件

* ユニットテスト、E2E テストが書かれている
* PWA（キャッシュ戦略）：Appshell について StaleWhileRevalidate とする。そのほかについてはキャッシュしない。
* PWA（オフライン対応）：Appshell のみを表示した上で、ネットワーク接続がない旨の表示をする。
* ユーザは、サインインしない場合は、閲覧のみ行える
* ユーザは、サインインした場合は、投稿・いいね・コメントができる

# 定義

* 検索条件

  * 投稿者のアカウント名
  * 投稿のメタ情報
  * 投稿の統計情報

* 投稿データ

  * メタ情報
    * 説明文
    * 撮影年月日（ごろ、という表現もあり）
    * 撮影場所（緯度・経度）
  * 統計情報
    * 閲覧回数
    * いいね数
    * コメント数
  * コメント

* アカウント情報

  * ユーザ名（Display Name）
  * 管理者フラグ

# TechStack

* Authentication: Firebase
* Storage: Firebase
* API: NodeJS 8.11.1 + PostgreSQL 10.4 + PostGIS 2.4
